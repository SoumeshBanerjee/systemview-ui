!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(2),i=document.getElementById("plot"),s=document.getElementById("file"),c={height:700,hovermode:"closest",showlegend:!1,dragmode:"pan",shapes:[],xaxis:{range:[0,.01],showspikes:!0,spikemode:"across",spikedash:"solid",spikecolor:"#000000",spikethickness:.5},yaxis:{title:"Core 0",fixedrange:!0,showgrid:!1,zeroline:!1,showline:!1},yaxis2:{title:"Core 1",fixedrange:!0,showgrid:!1,zeroline:!1,showline:!1},spikedistance:200,hoverdistance:10,grid:{rows:2,columns:1,subplots:[["xy"],["xy2"]]}};function a(e){const t=new Set(r.IGNORE_RENDER_SYS_STREAM_LIST.map(t=>e.streams.system[t])),n=o.generateLookupTable(e.events),i=o.calculateAndInjectDataPoints(e.events,n,t,e.streams.system.SYS_OVERFLOW);return c.xaxis.range=[i.xmin,.01],o.populatePlotData(n)}s.addEventListener("change",e=>{const t=e.target.files[0];if(!t||!t.type.match("application/json"))return;const n=new FileReader;n.addEventListener("loadend",e=>{try{const t=a(JSON.parse(e.target.result));Plotly.react(i,t,c,{scrollZoom:!0})}catch(e){alert("Invalid JSON File"+e)}}),n.readAsBinaryString(t)}),async function(){fetch("https://soumeshbanerjee.github.io/systemview-ui/mcore.json").then(e=>e.json()).then(e=>{const t=a(e);Plotly.newPlot(i,t,c,{scrollZoom:!0})}).catch(e=>{console.error(e),alert("Failed to fetch mcore.json")})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IGNORE_RENDER_SYS_STREAM_LIST=["SYS_IDLE","SYS_INIT","SYS_MODULEDESC","SYS_NAME_RESOURCE","SYS_NOP","SYS_NUMMODULES","SYS_STACK_INFO","SYS_SYSDESC","SYS_SYSTIME_CYCLES","SYS_SYSTIME_US","SYS_TRACE_START","SYS_TRACE_STOP","SYS_TASK_INFO"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLookupTable=function(e){const t={};return e.forEach(e=>{t[e.core_id]||(t[e.core_id]={irq:{},ctx:{},lastEvent:null}),!0!==e.in_irq||t[e.core_id].irq.hasOwnProperty(e.ctx_name)?!1!==e.in_irq||t[e.core_id].ctx.hasOwnProperty(e.ctx_name)||(t[e.core_id].ctx[e.ctx_name]={}):t[e.core_id].irq[e.ctx_name]={}}),t},t.calculateAndInjectDataPoints=function(e,t,n,r){function o(e,n){const r=t[e].lastEvent,o=!0===r.in_irq?t[e].irq[r.ctx_name]:t[e].ctx[r.ctx_name];o.x.push(n,null),o.y.push(o.name,null)}const i={xmin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY};return e.forEach(e=>{if(n.has(e.id))return;if(e.id===r)return console.log("Halt event arrived",e),o(0,e.ts),o(1,e.ts),t[0].lastEvent=null,void(t[1].lastEvent=null);e.ts>=i.xmax&&(i.xmax=e.ts),e.ts<=i.xmin&&(i.xmin=e.ts);let s=t[e.core_id].ctx[e.ctx_name];!0===e.in_irq&&(s=t[e.core_id].irq[e.ctx_name]),s.type||(s.type="scattergl",s.mode="lines",s.opacity=.9,s.line={width:20},s.name=!0===e.in_irq?"IRQ: "+e.ctx_name:e.ctx_name,1===e.core_id&&(s.yaxis="y2",s.xaxis="x"),s.y=[],s.x=[]),null!==t[e.core_id].lastEvent&&o(e.core_id,e.ts),s.x.push(e.ts),s.y.push(s.name),t[e.core_id].lastEvent=e}),i},t.populatePlotData=function(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Object.keys(r.ctx).forEach(e=>{t.push(r.ctx[e])}),Object.keys(r.irq).forEach(e=>{t.push(r.irq[e])})}),t}}]);
//# sourceMappingURL=bundle.js.map